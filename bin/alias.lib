# shellcheck shell=sh

# Aliases library
#

dir="${RCSHARE:-/tmp}/alias"
file="${dir}/alias.sh"

if [ ! -r "${file}" ] || [ "${PROFILE}" -eq 1 ]; then
    lib='alias.lib'
  tee "${file}" > /dev/null <<EOF
# Auto generated by: ${lib}

# To update, run either:
#   PROFILE=0 . /etc/profile
#   PROFILE=0 . ${lib}
#   profile.lib --force
#   ${lib} --force

alias hyperfine='hyperfine --prepare sync'
EOF
fi

if ! alias hyperfine >/dev/null 2>&1; then
  . "${file}"
fi

####################################### Executed: force & parse
#
####################################### Executed: force & parse
#
if echo "$0" | grep -q 'alias.lib$'; then
  if test "$#" -ne 0 && test "${1-}" = '--parsed' && shift; then
    case "$1" in
      --force) shift; PROFILE=0 . profile.lib
    esac
  elif test "$#" -ne 0; then
    . helpers.lib
    PARSE="$0" parse "$@"
  fi
fi
