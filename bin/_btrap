#!/usr/bin/env bash
#bashsupport disable=BP5001
#
# Perform bash completion for btrap.
export GLOBAL_ARGUMENTS=( --desc --help )
export GLOBAL_OPTIONS_ARRAY=()

_global_options_init() {
  declare -Axg GLOBAL_OPTIONS=( \
    ["--no-newline"]=false \
    ["--no-stderr"]=false \
    ["--no-stdout"]=false \
    ["--separator"]=',' \
    ["--verbose"]=false \
    )
}

_global_options_array() {
  export GLOBAL_OPTIONS_ARRAY=()
  for key in "${!GLOBAL_OPTIONS[@]}"; do
    if [[ "${key}" =~ --separator ]]; then
      GLOBAL_OPTIONS_ARRAY+=( "${key}=${GLOBAL_OPTIONS[${key}]}" )
    elif ${GLOBAL_OPTIONS[${key}]}; then
      GLOBAL_OPTIONS_ARRAY+=( "${key}" )
    fi
  done
}

_main() {
  _cli_global_args_options
  if ${BASH_COMPLETION} && type _get_comp_words_by_ref >/dev/null 2>&1; then
    true
  fi
}

_main "${@}"
