# shellcheck shell=sh

# Show message (ok or error) with symbol (✓, x respectively) based on status code, unless QUIET is set and exit
#

####################################### ✓|x die: QUIET (default: unset)
# Show message (ok or error) with symbol (✓, x respectively) based on status code, unless QUIET is set and exit
# Globals:
#   Green              Green color for ✓ symbol.
#   QUIET              Do not show message if set (default: unset).
#   Red                Red color for error message and x symbol.
#   Reset              Reset color.
# Arguments:
#   message            Message to show.
# Output:
#   Message to stderr if error and stdout for ok.
# Returns:
#   1-255 for error, 0 for ok.
#######################################
die() {
  rc=$?
  for arg do
    case "${arg}" in
      -h|--help) usage "${0}" ;;
      --desc) desc "${0}" ;;
      --version) rc.d.version ;;
    esac
  done
  if [ ! "${QUIET-}" ]; then
    case "${rc}" in
      0) ok "${@:-}" ;;
      *) error "${@:-}" ;;
    esac
  fi
  exit "${rc}"
}
